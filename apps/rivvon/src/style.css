/* src/style.css */
/* Global styles for Vue 3 rivvon app (merged: viewer + slyce) */

@import "tailwindcss";

/* Tell Tailwind v4 where to find source files for class detection */
@source "../src/**/*.vue";
@source "../src/**/*.js";
@source "../index.html";

/* ========================================
   CSS Custom Properties for light/dark mode theming (Slyce)
   ======================================== */
:root {
    --bg-primary: #ffffff;
    --bg-secondary: #f9fafb;
    --bg-tertiary: #f3f4f6;
    --bg-card: #ffffff;
    --bg-input: #ffffff;
    --bg-muted: #eeeeee;
    --bg-muted-alt: #dddddd;
    
    --text-primary: #111827;
    --text-secondary: #374151;
    --text-tertiary: #6b7280;
    --text-muted: #9ca3af;
    
    --border-primary: #e5e7eb;
    --border-secondary: #d1d5db;
    --border-muted: #eeeeee;
    
    --accent-green: #10b981;
    --accent-green-light: #ecfdf5;
    --accent-purple: #9333ea;
    --accent-purple-light: #faf5ff;
    
    color-scheme: dark;
}

/* Force dark mode via .app-dark class on html element */
:root.app-dark {
    --bg-primary: #111827;
    --bg-secondary: #1f2937;
    --bg-tertiary: #374151;
    --bg-card: #1f2937;
    --bg-input: #374151;
    --bg-muted: #374151;
    --bg-muted-alt: #4b5563;
    
    --text-primary: #f9fafb;
    --text-secondary: #e5e7eb;
    --text-tertiary: #9ca3af;
    --text-muted: #6b7280;
    
    --border-primary: #374151;
    --border-secondary: #4b5563;
    --border-muted: #4b5563;
    
    --accent-green: #10b981;
    --accent-green-light: #064e3b;
    --accent-purple: #a855f7;
    --accent-purple-light: #3b0764;
}

/* ========================================
   Base styles (shared)
   ======================================== */
html,
body {
    margin: 0;
    padding: 0;
    font-family: "Roboto", sans-serif;
    font-optical-sizing: auto;
    font-weight: 400;
    font-style: normal;
}

body {
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
}

/* ========================================
   Viewer mode styles (for Three.js canvas)
   ======================================== */
.viewer-mode {
    /* These aggressive styles only apply in viewer mode */
}

html:has(.viewer-mode),
body:has(.viewer-mode) {
    overflow: hidden;
    position: fixed;
    width: 100%;
    height: 100%;
    touch-action: none;
    background: #1a1a2e;
}

/* ========================================
   Slyce mode styles
   ======================================== */
body:not(:has(.viewer-mode)) {
    min-height: 100vh;
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

/* App container */
#app {
    /* Normal flow by default for Slyce */
}

/* Fixed positioning only in viewer mode */
#app:has(.viewer-mode) {
    position: fixed;
    inset: 0;
    z-index: 1;
    pointer-events: none;
}

/* Viewer mode: let pointer events pass through to Three.js canvas */
.viewer-mode {
    pointer-events: none;
}

/* 
 * NOTE: Pointer events for interactive elements are now handled
 * specifically in RibbonView.vue using scoped :deep() rules
 * to avoid broad selectors that create invisible clickable areas
 */

/* Blurred texture background */
.blurred-background {
    @apply fixed z-[-1];
    top: -10%;
    left: -10%;
    width: 120%;
    height: 120%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    filter: blur(60px) saturate(1.2);
    opacity: 0;
    transition: opacity 0.8s ease-in-out;
}

.blurred-background.visible {
    opacity: 0.7;
}

/* Three.js canvas container */
.three-container {
    @apply fixed inset-0 w-full h-full;
}

.three-container canvas {
    @apply w-full h-full;
}

/* Drawing canvas overlay */
.draw-canvas {
    @apply absolute top-0 left-0 z-[2];
    pointer-events: none;
}

.draw-canvas.active {
    pointer-events: auto;
}

/* Checkerboard background for drawing mode */
.checkerboard {
    @apply fixed inset-0 z-[1] pointer-events-none opacity-0;
    background-image: 
        linear-gradient(45deg, rgba(255,255,255,0.03) 25%, transparent 25%),
        linear-gradient(-45deg, rgba(255,255,255,0.03) 25%, transparent 25%),
        linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.03) 75%),
        linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.03) 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    transition: opacity 0.3s ease;
}

.checkerboard.visible {
    opacity: 1;
}

/* Viewer-specific button styles (dark semi-transparent for overlay on 3D canvas) */
/* Only applies to toolbar buttons, not header auth buttons, form controls, or panel buttons */
.viewer-mode .bottom-toolbar button {
    @apply px-4 py-3 text-lg text-white border-none cursor-pointer select-none;
    @apply min-w-[44px] min-h-[44px] flex items-center justify-center;
    background: rgba(0, 0, 0, 0.5);
    opacity: 0.92;
}

.viewer-mode .bottom-toolbar button:hover {
    @apply bg-black/70;
}

.viewer-mode .bottom-toolbar button:active {
    @apply bg-black/80;
}

/* Renderer indicator (debug mode) */
.renderer-indicator {
    @apply fixed top-2 left-1/2 -translate-x-1/2 z-[100];
    @apply px-3 py-1 text-xs font-mono rounded;
    @apply hidden;
    background: rgba(0, 0, 0, 0.7);
    color: #888;
}

.renderer-indicator.webgpu {
    color: #4ade80;
}

.renderer-indicator.webgl {
    color: #facc15;
}

body.debug-mode .renderer-indicator {
    @apply block;
}

/* Material Symbols icon sizing */
.material-symbols-outlined {
    font-size: 24px;
    line-height: 1;
}

 


/* Text input panel */
.text-input-panel {
    @apply fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[50];
    @apply bg-gray-900/95 rounded-lg p-6;
    @apply min-w-[300px] max-w-[90vw];
    @apply shadow-2xl;
}

.text-panel-header {
    @apply flex justify-between items-center mb-4;
}

.text-panel-header h3 {
    @apply text-white text-lg font-semibold m-0;
}

.close-btn {
    @apply bg-transparent text-white text-2xl p-0 min-w-0 min-h-0;
    @apply hover:text-red-400;
}

.text-panel-content {
    @apply flex flex-col gap-3;
}

.text-panel-content label {
    @apply text-gray-300 text-sm;
}

.text-panel-content input,
.text-panel-content select {
    @apply w-full px-3 py-2 rounded;
    @apply bg-gray-800 text-white border border-gray-700;
    @apply focus:outline-none focus:border-blue-500;
}

.generate-btn {
    @apply bg-blue-600 hover:bg-blue-500 mt-2;
}

/* Beta modal */
.beta-modal {
    @apply fixed inset-0 z-[200] bg-black/80;
    @apply flex items-center justify-center;
    @apply opacity-0 pointer-events-none;
    @apply transition-opacity duration-300;
}

.beta-modal.visible {
    @apply opacity-100 pointer-events-auto;
}

.beta-modal-content {
    @apply relative bg-gray-900 rounded-lg p-8 max-w-md mx-4;
    @apply text-center;
}

.beta-modal-header h2 {
    @apply text-white text-2xl font-bold mb-4;
}

.beta-modal-body p {
    @apply text-gray-300 mb-4;
}

.beta-modal-actions {
    @apply flex flex-col gap-3 my-6;
}

.beta-btn {
    @apply w-full py-3 px-6 rounded text-center no-underline;
    @apply transition-colors duration-200;
}

.beta-btn-primary {
    @apply bg-blue-600 text-white hover:bg-blue-500;
}

.beta-btn-secondary {
    @apply bg-gray-700 text-white hover:bg-gray-600;
}

.beta-note {
    @apply text-gray-500 text-sm italic;
}

.beta-modal-close {
    @apply absolute top-4 right-4;
    @apply bg-transparent text-gray-500 text-2xl p-0 min-w-0 min-h-0;
    @apply hover:text-white;
}

/* ========================================
   Slyce-specific styles
   ======================================== */

/* Cascadia Code font */
.cascadia {
    font-family: "Cascadia Code", sans-serif;
    font-optical-sizing: auto;
}

/* Slyce branding */
.slyce {
    font-weight: 900;
    font-style: italic;
    font-size: clamp(2rem, 8vw, 4rem);
    margin-bottom: 0.75rem;
    letter-spacing: -0.15rem;
}

@media (min-width: 640px) {
    .slyce {
        letter-spacing: -0.25rem;
    }
}

.tagline {
    font-weight: 300;
    font-style: normal;
    font-size: 1.2rem;
}

/* Responsive utility for hiding on mobile */
.hide-mobile {
    display: none;
}

@media (min-width: 640px) {
    .hide-mobile {
        display: block;
    }
}

/* Responsive input rows that wrap on mobile */
.input-row {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
    justify-content: flex-start;
}

/* Highlight the upload area when dragging files over the page */
body.hover .upload-area {
    border-color: #22c55e;
    background-color: #dcfce7;
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
}

@media (prefers-color-scheme: dark) {
    body.hover .upload-area {
        background-color: #064e3b;
    }
}

/* Slyce body overrides (applied via .slyce-view class on route) */
.slyce-view {
    font-family: Arial, sans-serif;
    text-align: center;
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

.slyce-view body {
    padding: 12px;
}

@media (min-width: 640px) {
    .slyce-view body {
        padding: 20px;
    }
}
